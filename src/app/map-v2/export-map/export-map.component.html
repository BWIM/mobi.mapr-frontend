<p-dialog 
      [header]="'PDF_EXPORT.TITLE' | translate" 
      [(visible)]="visible" 
      [modal]="true"
      [style]="{width: '90vw', height: '80vh'}"
      [draggable]="false"
      [breakpoints]="{ '1199px': '95vw', '575px': '95vw' }"
      [resizable]="false"
      [closable]="!isExporting">

      <div class="export-layout">
        <!-- Left side: PDF Export Options -->
        <div class="pdf-options-panel">
          <div class="pdf-export-fields">
            <!-- Orientation Selection -->
            <div class="field mb-3">
              <label class="block mb-2">{{ 'PDF_EXPORT.ORIENTATION' | translate }}</label>
              <div class="flex gap-3">
                <div class="flex align-items-center">
                  <p-radioButton 
                    [value]="'portrait'" 
                    [(ngModel)]="options.orientation" 
                    [inputId]="'portrait'"
                    [disabled]="isExporting"
                    name="orientation">
                  </p-radioButton>
                  <label [for]="'portrait'" class="ml-2">{{ 'PDF_EXPORT.PORTRAIT' | translate }}</label>
                </div>
                <div class="flex align-items-center">
                  <p-radioButton 
                    [value]="'landscape'" 
                    [(ngModel)]="options.orientation" 
                    [inputId]="'landscape'"
                    [disabled]="isExporting"
                    name="orientation">
                  </p-radioButton>
                  <label [for]="'landscape'" class="ml-2">{{ 'PDF_EXPORT.LANDSCAPE' | translate }}</label>
                </div>
              </div>
            </div>

            <!-- Paper Size Selection -->
            <div class="field mb-3">
              <label class="block mb-2">{{ 'PDF_EXPORT.PAPER_SIZE' | translate }}</label>
              <p-select 
                [options]="paperSizes" 
                [(ngModel)]="options.paperSize"
                optionLabel="label"
                [disabled]="isExporting"
                optionValue="value"
                [style]="{'width':'100%'}">
              </p-select>
            </div>

            <!-- Resolution Selection -->
            <div class="field mb-3">
              <label class="block mb-2">{{ 'PDF_EXPORT.RESOLUTION' | translate }}</label>
              <p-select 
                [options]="resolutionOptions" 
                [(ngModel)]="options.resolution"
                optionLabel="label"
                [disabled]="isExporting"
                optionValue="value"
                [style]="{'width':'100%'}">
              </p-select>
            </div>

            <!-- Export Information -->
            <div class="export-info mt-4 p-3 surface-100 border-round">
              <h4 class="text-sm font-semibold mb-2">{{ 'PDF_EXPORT.EXPORT_INFO' | translate }}</h4>
              <div class="text-sm text-600">
                <p><strong>{{ 'PDF_EXPORT.SELECTED_SIZE' | translate }}:</strong> {{ getSelectedPaperSizeLabel() }} ({{ options.orientation | uppercase }})</p>
                <p><strong>{{ 'PDF_EXPORT.RESOLUTION' | translate }}:</strong> {{ options.resolution }} DPI</p>
                <p><strong>{{ 'PDF_EXPORT.MAP_EXTENT' | translate }}:</strong> {{ getMapExtentLabel() }}</p>
                <p class="text-xs text-500 mt-2">{{ 'PDF_EXPORT.ESTIMATED_SIZE' | translate }}</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Right side: Map Preview -->
        <div class="map-preview-panel">
          <div class="export-map-container" [ngClass]="options.orientation">
            <div #exportMapContainer class="export-map" id="export-map"></div>
          </div>
        </div>
      </div>

      <ng-template pTemplate="footer">
        <div class="flex justify-content-end gap-2">
          <p-button 
            [label]="'COMMON.CANCEL' | translate" 
            (onClick)="hideDialog()"
            [disabled]="isExporting"
            styleClass="p-button-text">
          </p-button>
          <p-button 
            [label]="'COMMON.EXPORT' | translate" 
            (onClick)="exportPdf()"
            [disabled]="isExporting"
            [loading]="isExporting"
            styleClass="p-button-primary">
          </p-button>
        </div>
      </ng-template>
</p-dialog>