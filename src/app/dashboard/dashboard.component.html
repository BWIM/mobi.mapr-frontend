<div class="relative w-full h-screen overflow-hidden"
    style="height: 100vh; height: 100dvh;">
    <!-- Hauptbereich mit Karte -->
    <div class="w-full h-full">
        <app-map-v2></app-map-v2>

        <!-- Header mit Logo -->
        <div class="absolute top-4 left-1/2 transform -translate-x-1/2 z-10">
            <img src="assets/images/logo.png" alt="Logo"
                class="logo w-auto h-auto max-h-25 md:max-h-25 max-h-16 cursor-pointer"
                (click)="zoomToFeatures()" title="Recenter map">
        </div>
    </div>

    <!-- Linke Sidebar Tab - Mobile optimized -->
    <div class="sidebar-tab absolute left-0 top-1/2 -translate-y-1/2 bg-white shadow-lg rounded-r-lg z-10 cursor-pointer hover:bg-gray-50 transition-all duration-200 clickable-tab md:p-3 p-2"
        id="projects-sidebar-tab" (click)="showLeftSidebar()">
        <div class="flex flex-col items-center gap-3">
            <i class="pi pi-angle-right text-gray-800 md:text-xl text-lg"
                [class.rotate-180]="leftSidebarExpanded"></i>
            <span
                class="rotate-text text-gray-800 font-semibold md:text-base text-sm hidden sm:block">Projekte</span>
        </div>
    </div>

    <!-- Projekte Dialog - Mobile responsive -->
    <p-dialog [(visible)]="leftSidebarExpanded" position="left"
        [closable]="true" [draggable]="false" [maximizable]="true"
        class="h-full" [resizable]="true" styleClass="projects-sidebar"
        [style]="{'width': isMobile ? '100vw' : '500px'}"
        (onHide)="isLeftPinned = false" [header]="'PROJECTS.TITLE' | translate">
        <div class="p-3 h-full" id="projects-sidebar">
            <app-projects
                (projectSelected)="leftSidebarExpanded = $event"></app-projects>
        </div>
    </p-dialog>

    <!-- Details Tab - Mobile optimized -->
    <div class="sidebar-tab absolute right-0 top-1/2 -translate-y-1/2 bg-white shadow-lg rounded-l-lg z-20 cursor-pointer hover:bg-gray-50 transition-all duration-200 clickable-tab md:p-3 p-2"
        (click)="toggleSidebar()">
        <div class="flex flex-col items-center gap-3">
            <i class="pi pi-angle-left text-gray-800 md:text-xl text-lg"
                [class.rotate-180]="rightSidebarExpanded"></i>
            <span
                class="rotate-text text-gray-800 font-semibold md:text-base text-sm hidden sm:block">Details</span>
        </div>
    </div>

    <!-- Details Dialog - Mobile responsive -->
    <p-dialog [(visible)]="rightSidebarExpanded" position="right"
        [closable]="true" [draggable]="false" class="h-full" [resizable]="true"
        styleClass="details-sidebar"
        [style]="{'width': isMobile ? '100vw' : '400px'}"
        (onHide)="isRightPinned = false" [maximizable]="true"
        [header]="'DETAILS.TITLE' | translate">
        <div class="p-3 h-full info-section" id="details-sidebar">
            <app-details-sidebar
                (projectLoaded)="toggleSidebar()"></app-details-sidebar>
        </div>
    </p-dialog>

    <!-- Mobile Navigation Bar (only visible on small mobile) -->
    <div class="sm:hidden fixed bottom-4 left-1/2 transform -translate-x-1/2 z-30"
        *ngIf="isSmallMobile">
        <div class="flex gap-2 bg-white rounded-full shadow-lg p-2">
            <p-button styleClass="p-button-secondary p-button-rounded"
                (click)="showLeftSidebar()" title="Projekte">
                <i class="pi pi-folder text-lg"></i>
            </p-button>
            <p-button styleClass="p-button-secondary p-button-rounded"
                (click)="toggleSidebar()" title="Details">
                <i class="pi pi-info-circle text-lg"></i>
            </p-button>
        </div>
    </div>
</div>

<app-loading-spinner></app-loading-spinner>