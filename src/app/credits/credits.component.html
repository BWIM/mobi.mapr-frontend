<p-speedDial [model]="items" direction="up" buttonClassName="p-button-info"
    [showIcon]="'pi pi-info'" [hideIcon]="'pi pi-times'"
    [tooltipOptions]="{ tooltipPosition: 'left' }"
    id="credits-sidebar"></p-speedDial>

<!-- Credits Dialog - Mobile First with PrimeNG -->
<p-dialog [(visible)]="showCreditsDialog" [modal]="true" [closable]="true"
    [draggable]="false" [resizable]="false" [maximizable]="isMobile"
    [style]="isMobile ? {width: '100vw', height: '100dvh'} : {width: '95vw', maxWidth: '1400px', height: '95vh'}"
    [contentStyle]="{'padding': '0', 'overflow': 'hidden'}"
    styleClass="credits-dialog">

    <ng-template pTemplate="header">
        <div class="credits-header">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo-text">
                        <h1 class="app-title"
                            (onClick)="openLink('https://bw-im.de')">mobi.mapr
                        </h1>
                    </div>
                </div>
            </div>
        </div>
    </ng-template>

    <div class="credits-content"
        style="height: calc(100% - 4rem); overflow-y: auto;">

        <!-- Components Grid - Modern Card Layout -->
        <div class="components-container">
            <!-- Visualisierung Section -->
            <div class="component-section">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="pi pi-eye"></i>
                    </div>
                    <h2 class="section-title">Visualisierung</h2>
                </div>
                <div class="components-grid">
                    <div class="component-card"
                        *ngFor="let item of visualComponents"
                        [class.clickable]="!!item.url"
                        (click)="item.url ? openLink(item.url) : null">
                        <div class="component-icon">
                            <i [class]="item.icon"></i>
                        </div>
                        <div class="component-info">
                            <h3 class="component-name">{{item.name}}</h3>
                        </div>
                        <div class="component-action" *ngIf="item.url">
                            <i class="pi pi-external-link"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Daten Section -->
            <div class="component-section">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="pi pi-database"></i>
                    </div>
                    <h2 class="section-title">Daten</h2>
                </div>
                <div class="components-grid">
                    <div class="component-card"
                        *ngFor="let item of dataComponents"
                        [class.clickable]="!!item.url"
                        (click)="item.url ? openLink(item.url) : null">
                        <div class="component-icon">
                            <i [class]="item.icon"></i>
                        </div>
                        <div class="component-info">
                            <h3 class="component-name">{{item.name}}</h3>
                        </div>
                        <div class="component-action" *ngIf="item.url">
                            <i class="pi pi-external-link"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Backend Section -->
            <div class="component-section">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="pi pi-server"></i>
                    </div>
                    <h2 class="section-title">Backend</h2>
                </div>
                <div class="components-grid">
                    <div class="component-card"
                        *ngFor="let item of backendComponents"
                        [class.clickable]="!!item.url"
                        (click)="item.url ? openLink(item.url) : null">
                        <div class="component-icon">
                            <i [class]="item.icon"></i>
                        </div>
                        <div class="component-info">
                            <h3 class="component-name">{{item.name}}</h3>
                        </div>
                        <div class="component-action" *ngIf="item.url">
                            <i class="pi pi-external-link"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Routing Section -->
            <div class="component-section">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="pi pi-directions"></i>
                    </div>
                    <h2 class="section-title">Routing</h2>
                </div>
                <div class="components-grid">
                    <div class="component-card"
                        *ngFor="let item of routingComponents"
                        [class.clickable]="!!item.url"
                        (click)="item.url ? openLink(item.url) : null">
                        <div class="component-icon">
                            <i [class]="item.icon"></i>
                        </div>
                        <div class="component-info">
                            <h3 class="component-name">{{item.name}}</h3>
                        </div>
                        <div class="component-action" *ngIf="item.url">
                            <i class="pi pi-external-link"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stadtteil und Bezirksdaten Section -->
            <div class="component-section">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="pi pi-building"></i>
                    </div>
                    <h2 class="section-title">Stadtteil und Bezirksdaten</h2>
                </div>
                <div class="cities-grid">
                    <div class="city-card"
                        *ngFor="let item of citiesComponents">
                        <div class="city-icon">
                            <i [class]="item.icon"></i>
                        </div>
                        <h4 class="city-name">{{item.name}}</h4>
                    </div>
                </div>
            </div>
        </div>

        <!-- Danksagung Section -->
        <div class="acknowledgment-section">
            <div class="acknowledgment-content">
                <div class="acknowledgment-icon">
                    <i class="pi pi-heart"></i>
                </div>
                <div class="acknowledgment-text">
                    <h3>Danksagung</h3>
                    <p>Ein großer Dank gilt an alle Komponenten, die wir für
                        dieses Projekt nutzen konnten.</p>
                </div>
            </div>
        </div>
    </div>
</p-dialog>

<!-- Language Selection Dialog -->
<p-dialog [(visible)]="showLanguageDialog" [modal]="true"
    [style]="{width: '300px'}" header="Sprache wählen">
    <div class="flex flex-column gap-2">
        <div *ngFor="let lang of languages"
            class="p-3 border-round cursor-pointer transition-colors transition-duration-150"
            [class.bg-primary-50]="currentLang === lang.code"
            [class.border-primary]="currentLang === lang.code"
            (click)="switchLanguage(lang.code)">
            <div class="flex align-items-center gap-3">
                <i
                    [class]="currentLang === lang.code ? 'pi pi-check text-primary' : 'pi pi-circle text-400'"></i>
                <span class="font-medium">{{ lang.name }}</span>
            </div>
        </div>
    </div>
</p-dialog>

<!-- Shortcuts Dialog -->
<p-dialog [(visible)]="showShortcutsDialog" [modal]="true" header="Tastenkürzel"
    [style]="{width: isMobile ? '95vw' : '60vw', maxWidth: '800px'}"
    [draggable]="false" [resizable]="false">
    <div class="flex flex-column gap-3">
        <div *ngFor="let shortcut of shortcuts"
            class="flex align-items-center justify-content-between p-3 border-round surface-100">
            <span class="font-medium">{{shortcut.description}}</span>
            <p-tag [value]="shortcut.key" severity="secondary"></p-tag>
        </div>
    </div>
</p-dialog>